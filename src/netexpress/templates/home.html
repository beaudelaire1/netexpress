{% extends "base.html" %}
{% load static %}

{# Ajout de la feuille de style spécifique à la page d'accueil afin
   d'améliorer la grille, les couleurs et la mise en page.  Ce
   fichier ``style.css`` s'appuie sur notre palette et remplace
   certains styles définis dans ``base.css`` pour l'accueil. #}
{% block extra_head %}
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock %}

{% block content %}

<section class="hero">
  <div class="hero__text">
    <h1>Les experts des <span class="accent">espaces verts, nettoyage, peinture & bricolage à Cayenne</span></h1>
    <p class="lead">
      Notre équipe locale intervient rapidement sur toute l’Île de Cayenne pour sublimer vos
      intérieurs et extérieurs : jardins entretenus, locaux impeccables, rénovation de peinture
      et petits travaux réalisés avec soin et professionnalisme.
    </p>
    <div class="actions">
      <a class="btn btn-primary" href="{% url 'services:list' %}">Voir nos services</a>
      <a class="btn btn-outline" href="{% url 'devis:request_quote' %}">Demander un devis</a>
    </div>
    <ul class="hero__stats">
      <li><span>4,9/5</span> avis clients</li>
      <li><span>&lt; 24 h</span> délai d’intervention</li>
      <li><span>100 %</span> satisfait ou refait</li>
    </ul>
  </div>
  <div class="hero__media">
        <img src="{% static 'img/hero_home.png' %}" alt="Illustration de nos services" style="border-radius:16px; box-shadow:0 10px 20px rgba(0,0,0,.1)">
  </div>
</section>

<section class="trust">
  <ul class="trust__badges">
    <li>Entreprise déclarée & assurée</li>
    <li>Équipements écoresponsables</li>
    <li>Intervenants triés & formés</li>
  </ul>
</section>

<section class="section">
  <div class="section__head">
    <h2>Nos métiers</h2>
  </div>
  <div class="grid">
    {# Si des catégories sont fournies par la vue, on les liste dynamiquement. Sinon, on affiche cinq métiers par défaut avec des photos libres de droits. #}
    {% if categories %}
      {% for cat in categories %}
        <article class="card service-card">
          {% if cat.icon %}
            <img class="service-card__img" src="{{ cat.icon.url }}" alt="Illustration {{ cat.name }}">
          {% else %}
            {# Fallback : utiliser une image Unsplash basée sur le slug de la catégorie #}
            <img class="service-card__img" src="https://source.unsplash.com/400x300/?{{ cat.slug|urlencode }}" alt="{{ cat.name }}">
          {% endif %}
          <h3><a href="{% url 'services:list' %}?category={{ cat.slug }}">{{ cat.name }}</a></h3>
          <p class="small">Découvrez nos prestations de {{ cat.name|lower }}.</p>
          <a class="btn btn-outline" href="{% url 'services:list' %}?category={{ cat.slug }}">Voir plus</a>
        </article>
      {% endfor %}
    {% else %}
            <article class="card service-card">
        <img class="service-card__img" src="https://images.unsplash.com/photo-1734079692160-fcbe4be6ab96?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1170" alt="Espaces verts">
        <h3><a href="{% url 'services:list' %}?category=espaces-verts">Espaces verts</a></h3>
        <p class="small">Entretien de pelouses, haies et jardins luxuriants.</p>
        <a class="btn btn-outline" href="{% url 'services:list' %}?category=espaces-verts">Voir plus</a>
      </article>
      <article class="card service-card">
        <img class="service-card__img" src="https://source.unsplash.com/400x300/?cleaning" alt="Entretien">
        <h3><a href="{% url 'services:list' %}?category=entretien">Entretien</a></h3>
        <p class="small">Nettoyage professionnel pour tous types de surfaces.</p>
        <a class="btn btn-outline" href="{% url 'services:list' %}?category=entretien">Voir plus</a>
      </article>
      <article class="card service-card">
        <img class="service-card__img" src="https://www.cmesmat.fr/media/shutterstock_1283051314.jpg" alt="Peinture">
        <h3><a href="{% url 'services:list' %}?category=peinture">Peinture</a></h3>
        <p class="small">Rafraîchissement et rénovation de vos murs et façades.</p>
        <a class="btn btn-outline" href="{% url 'services:list' %}?category=peinture">Voir plus</a>
      </article>
      <article class="card service-card">
        <img class="service-card__img" src="https://plus.unsplash.com/premium_photo-1682597000617-7e803f9e5699?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8YnJpY29sYWdlfGVufDB8fDB8fHww&fm=jpg&q=60&w=3000" alt="Bricolage">
        <h3><a href="{% url 'services:list' %}?category=bricolage">Bricolage</a></h3>
        <p class="small">Petits travaux et installations par nos experts.</p>
        <a class="btn btn-outline" href="{% url 'services:list' %}?category=bricolage">Voir plus</a>
      </article>
      <article class="card service-card">
        <img class="service-card__img" src="https://images.unsplash.com/photo-1754322449185-31f56117ed87?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fCVDMyVBOWxhZ2FnZXxlbnwwfHwwfHx8MA%3D%3D&fm=jpg&q=60&w=3000" alt="Élagage">
        <h3><a href="{% url 'services:list' %}?category=elagage">Élagage</a></h3>
        <p class="small">Taille et élagage des arbres pour des espaces verts soignés.</p>
        <a class="btn btn-outline" href="{% url 'services:list' %}?category=elagage">Voir plus</a>
      </article>
    {% endif %}
  </div>
</section>

<section class="section">
  <div class="section__head">
    <h2>Services populaires</h2>
      <a class="link" href="{% url 'services:list' %}">Tout voir →</a>
  </div>

  <div class="grid">
    {% if featured_services %}
      {% for s in featured_services %}
        <article class="card service-card">
          {% if s.image %}<img class="service-card__img" src="{{ s.image.url }}" alt="{{ s.title }}">{% endif %}
          <h3><a href="{% url 'services:detail' s.slug %}">{{ s.title }}</a></h3>
          <p class="small">{{ s.short_description|default:"Nettoyage de qualité professionnelle." }}</p>
          <div class="meta">
            <span class="price">À partir de {{ s.base_price }} €</span>
            <span class="sep">·</span>
            <span>~{{ s.duration_minutes }} min</span>
          </div>
          <a class="btn btn-outline" href="{% url 'services:detail' s.slug %}">Réserver</a>
        </article>
      {% endfor %}
    {% else %}
            <article class="card service-card">
        <img class="service-card__img" src="https://source.unsplash.com/400x300/?office,cleaning" alt="Nettoyage de bureaux">
        <h3>Nettoyage de bureaux</h3>
        <p class="small">Entretien régulier, horaires flexibles, produits écoresponsables.</p>
        <div class="meta"><span class="price">Dès 49 €</span> <span class="sep">·</span> <span>~60 min</span></div>
        <a class="btn btn-outline" href="{% url 'services:list' %}">Découvrir</a>
      </article>
      <article class="card service-card">
        <img class="service-card__img" src="https://source.unsplash.com/400x300/?construction,cleanup" alt="Remise en état fin de chantier">
        <h3>Remise en état fin de chantier</h3>
        <p class="small">Dépoussiérage complet, vitrerie, sols — prêt à livrer.</p>
        <div class="meta"><span class="price">Dès 89 €</span> <span class="sep">·</span> <span>~120 min</span></div>
        <a class="btn btn-outline" href="{% url 'services:list' %}">Découvrir</a>
      </article>
      <article class="card service-card">
        <img class="service-card__img" src="https://source.unsplash.com/400x300/?airbnb,cleaning" alt="Nettoyage Airbnb">
        <h3>Nettoyage Airbnb / location courte durée</h3>
        <p class="small">Rotation rapide, respect check‑lists, draps & consommables.</p>
        <div class="meta"><span class="price">Dès 39 €</span> <span class="sep">·</span> <span>~45 min</span></div>
        <a class="btn btn-outline" href="{% url 'services:list' %}">Découvrir</a>
      </article>
    {% endif %}
  </div>
</section>

<section class="section muted">
  <h2>Comment ça marche ?</h2>
  <ol class="steps">
    <li><span>1</span><b>Choisissez</b> un service et un créneau.</li>
    <li><span>2</span><b>Confirmez</b> l’adresse et vos instructions.</li>
    <li><span>3</span><b>Intervention</b> par nos équipes formées.</li>
    <li><span>4</span><b>Validation</b> & reçu/facture immédiat.</li>
  </ol>
</section>

<section class="cta-strip">
  <div class="cta-strip__content">
    <h3>Besoin d’un devis rapide ?</h3>
    <p class="small">Réponse sous 24h. Tarifs clairs, sans surprise.</p>
    <a class="btn btn-primary" href="{% url 'devis:request_quote' %}">Obtenir mon devis</a>
  </div>
</section>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "Nettoyage Express",
  "url": "http://127.0.0.1:8000/",
  "image": [],
  "telephone": "+594000000",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Matoury",
    "postalCode": "97351",
    "addressCountry": "FR"
  },
</script>
