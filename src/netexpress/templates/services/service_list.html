{% extends "base.html" %}
{% load static %}

{% block title %}Nos services — NetExpress{% endblock %}

{% block content %}
<section class="section">
  <div class="section-head">
    <h1 class="section-title">Nos services</h1>
  </div>

  <div class="grid">
    {% for s in services %}
      {# N'afficher la carte que si on a une image; sinon utiliser un placeholder local #}
      <article class="card service-card">
        {% if s.image %}
          <img class="service-card__img" src="{{ s.image.url }}" alt="{{ s.title }}">
        {% else %}
          {# Image locale de secours basée sur la catégorie du service.  Ceci évite l'utilisation de
             ressources externes comme Unsplash et garantit un rendu cohérent. #}
          {% if s.category.slug == 'espaces-verts' %}
            <img class="service-card__img" src="{% static 'img/000033825_900x500_c.jpg' %}" alt="{{ s.title }}">
          {% elif s.category.slug == 'peinture' %}
            <img class="service-card__img" src="{% static 'img/peinture.jpg' %}" alt="{{ s.title }}">
          {% elif s.category.slug == 'bricolage' %}
            <img class="service-card__img" src="{% static 'img/brico.jpg' %}" alt="{{ s.title }}">
          {% elif s.category.slug == 'elagage' %}
            <img class="service-card__img" src="{% static 'img/elagage.jpg' %}" alt="{{ s.title }}">
          {% else %}
            <img class="service-card__img" src="{% static 'img/service-1.svg' %}" alt="{{ s.title }}">
          {% endif %}
        {% endif %}

        <h3><a href="{% url 'services:detail' s.slug %}">{{ s.title }}</a></h3>
        <p class="small">{{ s.short_description|default:"" }}</p>

        <div class="meta">
          <span class="price">À partir de {{ s.base_price }} €</span>
          <span class="sep">·</span>
          <span>~{{ s.duration_minutes }} min</span>
        </div>

        <a class="btn btn-outline" href="{% url 'services:detail' s.slug %}">Voir plus</a>
      </article>
    {% empty %}
      <p>Aucun service n'est disponible pour le moment.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
