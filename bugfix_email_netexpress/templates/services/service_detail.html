{% extends "base.html" %}
{% load static %}

{% block title %}{{ service.title }} — NetExpress{% endblock %}

{% block content %}
<section class="section">
  <h1>{{ service.title }}</h1>
  {% if service.image %}
    <img src="{{ service.image.url }}" alt="{{ service.title }}" style="max-width:100%; border-radius:16px; box-shadow: var(--shadow-1); margin-bottom:20px;">
  {% else %}
    {# Image de remplacement locale si aucune image n'est associée au service.  On choisit un visuel
       cohérent en fonction de la catégorie du service pour éviter les dépendances à Unsplash. #}
    {% if service.category.slug == 'espaces-verts' %}
      <img src="{% static 'img/000033825_900x500_c.jpg' %}" alt="{{ service.title }}" style="max-width:100%; border-radius:16px; box-shadow: var(--shadow-1); margin-bottom:20px;">
    {% elif service.category.slug == 'peinture' %}
      <img src="{% static 'img/peinture.jpg' %}" alt="{{ service.title }}" style="max-width:100%; border-radius:16px; box-shadow: var(--shadow-1); margin-bottom:20px;">
    {% elif service.category.slug == 'bricolage' %}
      <img src="{% static 'img/brico.jpg' %}" alt="{{ service.title }}" style="max-width:100%; border-radius:16px; box-shadow: var(--shadow-1); margin-bottom:20px;">
    {% elif service.category.slug == 'elagage' %}
      <img src="{% static 'img/elagage.jpg' %}" alt="{{ service.title }}" style="max-width:100%; border-radius:16px; box-shadow: var(--shadow-1); margin-bottom:20px;">
    {% else %}
      <img src="{% static 'img/service-1.svg' %}" alt="{{ service.title }}" style="max-width:100%; border-radius:16px; box-shadow: var(--shadow-1); margin-bottom:20px;">
    {% endif %}
  {% endif %}
  <p>{{ service.description }}</p>
  <p><strong>Catégorie&nbsp;:</strong> {{ service.category.name }}</p>
  <p class="meta"><strong>Prix&nbsp;:</strong> À partir de {{ service.base_price }} € — durée ~{{ service.duration_minutes }} min.</p>

  {% if service.tasks.all %}
    <h3>Checklist</h3>
    <ul>
      {% for task in service.tasks.all %}
        <li>{{ task.name }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <a class="btn btn-primary" href="{% url 'devis:request_quote' %}?service={{ service.slug }}">Demander un devis</a>
</section>
{% endblock %}