{% extends "base.html" %}
{% load static %}

{% block title %}Espace ouvrier — NetExpress{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/backoffice.css' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css">
{% endblock %}

{% block content %}
<div class="bo-shell">
  <aside class="bo-sidebar" aria-label="Navigation ouvrier">
    <div class="bo-brand">Espace ouvrier</div>
    <nav class="bo-nav">
      <a class="is-primary" href="{% url 'core:worker_dashboard' %}">Tableau de bord</a>
      <a href="{% url 'tasks:calendar' %}">Calendrier tâches</a>
      <a href="{% url 'tasks:list' %}">Liste des tâches</a>
    </nav>
  </aside>

  <main class="bo-main">
    <div class="bo-head">
      <div>
        <div class="bo-title">Tâches à venir</div>
        <div class="bo-subtitle">
          {% if teams %}Équipes: {{ teams|join:", " }}{% else %}Toutes les tâches{% endif %}
        </div>
      </div>
    </div>

    <section class="bo-card">
      {% if tasks %}
      <table class="bo-table">
        <thead>
          <tr>
            <th>Titre</th>
            <th>Statut</th>
            <th>Début</th>
            <th>Échéance</th>
            <th>Lieu</th>
          </tr>
        </thead>
        <tbody>
          {% for t in tasks %}
          <tr>
            <td><a href="{% url 'tasks:detail' t.pk %}">{{ t.title }}</a></td>
            <td>{{ t.get_status_display }}</td>
            <td>{{ t.start_date|date:'d/m/Y' }}</td>
            <td>{{ t.due_date|date:'d/m/Y' }}</td>
            <td>{{ t.location|default:'–' }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
        <p class="muted">Aucune tâche trouvée pour vos équipes.</p>
      {% endif %}
    </section>
  </main>
</div>
{% endblock %}
