{% extends "base.html" %}
{% load static %}
{% block title %}Accueil — Nettoyage Express{% endblock %}
{% block content %}
<section class="hero">
  <div class="hero-card">
    <h1 class="hero-title">Votre solution complète pour l'entretien et les travaux</h1>
    <p class="hero-subtitle">Nettoyage, peinture, rénovation — nous gérons vos projets de A à Z.</p>
    <a class="cta" href="{% url 'devis:request_quote' %}">Demander un devis</a>
  </div>
  <div class="hero__media">
    <!-- Limiter la taille de l'illustration d'accueil afin qu'elle s'adapte aux
         différentes tailles d'écran sans déformer ou dépasser du conteneur. -->
    <img src="{% static 'img/hero_home.png' %}" alt="Nettoyage Express"
         loading="lazy"
         style="max-width:100%; height:auto;">
  </div>
</section>

{#
  Section des catégories « Nos métiers »
  On parcourt l'ensemble des catégories fournies par la vue pour afficher
  dynamiquement un aperçu des différentes expertises de l'entreprise.
  Chaque carte renvoie vers la liste des services filtrée sur la
  catégorie correspondante via ``category.get_absolute_url``.
#}
<section id="metiers" class="section">
  <div class="section-head">
    <h2 class="section-title">Nos métiers</h2>
  </div>
  <div class="grid">
    {% for category in categories %}
      <a href="{{ category.get_absolute_url }}" class="card category-card" style="text-decoration:none">
        {% if category.icon %}
          <img class="service-card__img" src="{{ category.icon.url }}" alt="{{ category.name }}">
        {% else %}
          {# Utilise une image libre de droits depuis Unsplash si aucune icône n'est fournie #}
          <img class="service-card__img" src="https://source.unsplash.com/400x300/?{{ category.slug }}" alt="{{ category.name }}">
        {% endif %}
        <h3 class="card-title" style="margin-top:8px">{{ category.name }}</h3>
      </a>
    {% empty %}
      <p>Aucune catégorie disponible pour le moment.</p>
    {% endfor %}
  </div>
</section>

{#
  Section des services populaires
  Cette grille présente un échantillon des services actifs les plus récents.
  Les cartes utilisent l'image du service si disponible ou se replient
  sur une photo générique en fonction de la catégorie.  La courte
  description (si fournie) aide les visiteurs à se faire une idée rapide.
#}
<section id="services" class="section">
  <div class="section-head">
    <h2 class="section-title">Services populaires</h2>
  </div>
  <div class="grid">
    {% for service in featured_services %}
      <a href="{{ service.get_absolute_url }}" class="card service-card" style="text-decoration:none">
        {% if service.image %}
          <img class="service-card__img" src="{{ service.image.url }}" alt="{{ service.title }}">
        {% else %}
          <img class="service-card__img" src="https://source.unsplash.com/400x300/?{{ service.category.slug }}" alt="{{ service.title }}">
        {% endif %}
        <h3 class="card-title" style="margin-top:8px">{{ service.title }}</h3>
        {% if service.short_description %}
          <p class="muted" style="font-size:0.9rem">{{ service.short_description }}</p>
        {% endif %}
      </a>
    {% empty %}
      <p>Aucun service à afficher pour le moment.</p>
    {% endfor %}
  </div>
</section>

<section class="section">
  <div class="usp">
    <div class="usp-item">
      <div class="usp-icon"></div>
      <div><div class="usp-text">Intervention rapide</div><div class="muted">Créneaux sous 48h selon disponibilités</div></div>
    </div>
    <div class="usp-item">
      <div class="usp-icon"></div>
      <div><div class="usp-text">Équipes qualifiées</div><div class="muted">Professionnels formés et assurés</div></div>
    </div>
    <div class="usp-item">
      <div class="usp-icon"></div>
      <div><div class="usp-text">Devis transparent</div><div class="muted">Prix clairs, sans surprise</div></div>
    </div>
  </div>
</section>

<section id="devis" class="section">
  <div class="form-card">
    <h2 style="margin-top:0">Obtenir un devis</h2>
    <form method="post" action="{% url 'devis:request_quote' %}">
      {% csrf_token %}
      <div class="row row-2">
        <div>
          <input class="input" type="text" name="name" placeholder="Nom complet" required aria-label="Nom complet">
        </div>
        <div>
          <input class="input" type="tel" name="phone" placeholder="Téléphone" required aria-label="Téléphone">
        </div>
        <div>
          <input class="input" type="email" name="email" placeholder="Email" required aria-label="Email">
        </div>
        <div>
          <input class="input" type="text" name="service" placeholder="Service souhaité" aria-label="Service souhaité">
        </div>
        <div style="grid-column:span 12">
          <textarea class="textarea" name="message" rows="4" placeholder="Décrivez votre besoin…" aria-label="Description de votre besoin"></textarea>
        </div>
      </div>
      <div style="margin-top:12px; display:flex; gap:10px; align-items:center">
        <button class="btn" type="submit">Envoyer</button>
        <small class="muted">Nous vous répondons sous 24–48h ouvrées.</small>
      </div>
    </form>
  </div>
</section>

<section id="contact" class="section">
  <div class="form-card">
    <h2 style="margin-top:0">Contact</h2>
    <p class="muted">Une question ? Besoin d'un passage aujourd'hui ?</p>
    <p class="muted">Email: contact@nettoyage-express.test — Tél: 0594 00 00 00</p>
  </div>
</section>
{% endblock %}
